---
title: Multiples of 3 and 5
index: 1
tags:
  https://img.shields.io/badge/Euler-1-brightgreen.svg?style=for-the-badge: https://projecteuler.net/problem=1
  https://img.shields.io/badge/Languages-3-blueviolet.svg?style=for-the-badge:
downloads:
  Overview: https://projecteuler.net/overview=001
---

> If we list all the natural numbers below $10$ that are multiples of $3$ or
> $5$, we get $3$, $5$, $6$ and $9$. The sum of these multiples is $23$.  Find
> the sum of all the multiples of $3$ or $5$ below $1000$.

### Solution

A simple way to do this is to go through all numbers from 1 to 999 and test
whether they are divisible by 3 or by 5. But if we want to do the same for
numbers less than 1,000,000,000 that is going to take a long time.

To get a more efficient solution you could also calculate the sum of the
numbers that are divisible by 3, plus the sum of numbers divisible by 5. BUt as
you summed numbers divisible by 15 twise you would have to subtract the sum of
the numbers divisible by 15.

Lets write out some of the terms for $n=3$.
$$
3+6+9+12+\cdots+999=3(1+2+3+4+\cdots+333)
$$

We also not that $1+2+3+\cdots+p=\frac{1}{2}p(p+1)$. Using these two facts, we
are able to calculates the sum of numbers divisible by $n$ less than $t$ like
so:

$$
p = t / n\\
sum = n(p(p+1)) / 2
$$

Then the final solution will have the pseudocode of
```
target=999

Function SumDivisibleBy(n)
  p=target / n
  return n*(p*(p+1)) / 2
EndFunction

Output SumDivisibleBy(3)+SumDivisibleBy(5)-SumDivisibleBy(15)
```

### Code

%%%

Ada
```ada
with Ada.Text_IO; use Ada.Text_IO;
with Ada.Integer_Text_IO; use Ada.Integer_Text_IO;
with Ada.Command_Line; use Ada.Command_Line;

procedure P1 is
  function SumDivisible ( n:Integer; max:Integer ) return Integer is
    p: Integer := max / n;
    ret: Integer := n * (p * (p + 1)) / 2;
  begin
    return ret;
  end SumDivisible;
  max: Integer := 999;
  val: Integer := 0;
begin
  if Argument_Count >= 1 then
    max := Integer'Value(Argument(1)) - 1;
  end if;
  val := SumDivisible(3, max) + SumDivisible(5, max) - SumDivisible(15, max);
  Put_Line(Integer'Image(val));
end P1;
```

Cpp
```cpp
#include <cstdlib>
#include <iostream>

int SumDivisible(int n, int max) {
  int p = max / n;
  return n * (p * (p + 1)) / 2;
}

int main(int argc, char *argv[]) {
  int max = 999;
  if (argc > 1) {
    max = std::atoi(argv[1]) - 1;
  }
  int sum = SumDivisible(3, max) + SumDivisible(5, max) - SumDivisible(15, max);
  std::cout << sum << std::endl;
}
```

Fortran
```fortran
real function SumDivisible(n, max)
  integer, intent(in) :: n
  integer, intent(in) :: max
  integer :: p
  p = max / n
  p = n * (p * (p + 1)) / 2
  SumDivisible = p
end function SumDivisible

program p1
  integer :: max = 999
  integer :: sum
  character(len=32) :: arg
  if (command_argument_count() .ge. 1) then
    call get_command_argument(1, arg)
    read(arg,*) max
  end if
  sum = int(SumDivisible(3, max) + SumDivisible(5, max) - SumDivisible(15, max))
  print *, sum
end program p1
```

%%%

