---
title: Highly divisible triangular number 
index: 12
tags:
  https://img.shields.io/badge/Euler-12-brightgreen.svg?style=for-the-badge: https://projecteuler.net/problem=12
  https://img.shields.io/badge/Languages-1-blueviolet.svg?style=for-the-badge:
downloads:
  Overview: https://projecteuler.net/overview=012
---

> The sequence of triangle numbers is generated by adding the natural numbers.
> So the $7^{th}$ triangle number would be $1 + 2 + 3 + 4 + 5 + 6 + 7 = 28$.
> The first ten terms would be:
> $$
> 1, 3, 6, 10, 15, 21, 28, 36, 45, 55, \ldots
> $$
> Let us list the factors of the first seven triangle numbers:
> 
> * $1: 1$
> * $3: 1,3$
> * $6: 1,2,3,6$
> * $10: 1,2,5,10$
> * $15: 1,3,5,15$
> * $21: 1,3,7,21$
> * $28: 1,2,4,7,14,28$
> 
> We can see that $28$ is the first triangle number to have over five divisors.
> 
> What is the value of the first triangle number to have over five hundred
> divisors?

### Solution

### Code

%%%

C++
```cpp
#include <algorithm>
#include <cmath>
#include <iostream>
#include <vector>

int main(int argc, char *argv[]) {
  int req_count = 500;
  if (argc > 1) {
    req_count = atoi(argv[1]) - 1;
  }
  std::vector<unsigned> primes;
  for (unsigned i = 2; i < req_count * 2; ++i) {
    if (!std::any_of(primes.begin(), primes.end(),
                     [i](unsigned prime) { return i % prime == 0; }))
      primes.push_back(i);
  }

  unsigned n = 3;
  unsigned dn = 2;
  unsigned i, exponent;
  unsigned cnt = 0;
  while (cnt <= req_count) {
    n += 1;
    unsigned n1 = n;
    if (n1 % 2 == 0)
      n1 /= 2;
    unsigned dn1 = 1;
    for (i = 0; i < primes.size(); ++i) {
      if (primes[i] * primes[i] > n1) {
        dn1 *= 2;
        break;
      }
      exponent = 1;
      while (n1 % primes[i] == 0) {
        exponent++;
        n1 /= primes[i];
      }
      if (exponent > 1)
        dn1 *= exponent;
      if (n1 == 1)
        break;
    }
    cnt = dn * dn1;
    dn = dn1;
  }
  std::cout << n * (n - 1) / 2 << std::endl;
}
```

%%%
